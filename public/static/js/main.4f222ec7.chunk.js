(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{129:function(e,t,s){},130:function(e,t,s){},157:function(e,t){},159:function(e,t,s){},234:function(e,t,s){},235:function(e,t,s){},236:function(e,t,s){"use strict";s.r(t);var a=s(0),i=s.n(a),n=s(30),c=s.n(n),r=(s(128),s(129),s(130),s(239)),o=s(240),l=s(120),d=s(33),u=s.n(d),j=s(37),h=s.n(j),m=(s(159),s(43)),p=s(44),b=new(function(){function e(){Object(m.a)(this,e),this.anthenticated=!1}return Object(p.a)(e,[{key:"login",value:function(e){this.anthenticated=!0,e()}},{key:"logout",value:function(e){this.anthenticated=!1,e()}},{key:"isAnthenticated",value:function(){return(this.anthenticated||window.localStorage.getItem("userid"))&&!0}}]),e}()),g=s(42),v=s(4),O=function(e){return Object(v.jsxs)("div",{className:"login",children:[Object(v.jsxs)(r.a,{name:"basic",labelCol:{span:8},wrapperCol:{span:16},initialValues:{remember:!0},onFinish:function(t){console.log("Success:",t,e),"/register"===e.location.pathname?u.a.post("/users/api/user/register",h.a.stringify({name:t.username,password:t.password})).then((function(t){console.log("ressss",t),t.data.success&&(console.log(e),b.login((function(){console.log("\u767b\u9646\u6210\u529f\u8fdb\u884c\u8df3\u8f6c"),e.history.push("/login")})))})):u.a.post("/users/api/user/login",h.a.stringify({name:t.username,password:t.password})).then((function(t){console.log("ressss",t),t.data.success&&(console.log(e),b.login((function(){console.log("\u767b\u9646\u6210\u529f\u8fdb\u884c\u8df3\u8f6c"),window.localStorage.setItem("userid",t.data.result.userid),window.localStorage.setItem("username",t.data.result.username),e.history.push("/pentakill")})))}))},onFinishFailed:function(e){console.log("Failed:",e)},autoComplete:"off",children:[Object(v.jsx)(r.a.Item,{label:"Username",name:"username",rules:[{required:!0,message:"Please input your username!"}],children:Object(v.jsx)(o.a,{})}),Object(v.jsx)(r.a.Item,{label:"Password",name:"password",rules:[{required:!0,message:"Please input your password!"}],children:Object(v.jsx)(o.a.Password,{})}),Object(v.jsx)(r.a.Item,{wrapperCol:{offset:8,span:16},children:Object(v.jsx)(l.a,{type:"primary",htmlType:"submit",children:"Submit"})}),Object(v.jsx)(r.a.Item,{wrapperCol:{offset:8,span:16},children:Object(v.jsx)(g.b,{to:"/register",style:{color:"black"},children:Object(v.jsx)(l.a,{type:"primary",onClick:function(){},children:"Register"})})})]}),Object(v.jsx)("div",{className:"hbicp",children:Object(v.jsx)("a",{href:"https://beian.miit.gov.cn/",children:"\u5180ICP\u59072021018062\u53f7-1"})})]})},f=s(13),x=s(50),k=s(71),w=s(68),y=(s(234),s.p+"static/media/logo.9f29a786.png"),_=function(e){Object(k.a)(s,e);var t=Object(w.a)(s);function s(){return Object(m.a)(this,s),t.apply(this,arguments)}return Object(p.a)(s,[{key:"render",value:function(){return Object(v.jsx)("div",{className:"international-header",children:Object(v.jsxs)("div",{className:"my-header",children:[Object(v.jsx)("div",{className:"my-ico",children:Object(v.jsx)("img",{src:y,alt:"logo"})}),Object(v.jsx)("div",{className:"my-nav",children:Object(v.jsx)("div",{children:"\u732a\u5996\u4e94\u6740"})}),Object(v.jsxs)("div",{className:"my-others",children:[Object(v.jsx)("div",{children:"\u56fd"}),Object(v.jsx)("div",{children:"\u670d"}),Object(v.jsx)("div",{children:"\u7b2c"}),Object(v.jsx)("div",{children:"\u4e00"}),Object(v.jsx)("div",{children:"\u524d"}),Object(v.jsx)("div",{children:"\u7aef"})]})]})})}}]),s}(i.a.Component),N=s(73),S=s.n(N),C=s(74),I=s.n(C),F=function(e){var t=e.dataList,s=e.curIndex,i=e.callBack;console.log("Elevator",e);var n=Object(a.useState)(s),c=Object(x.a)(n,2),r=c[0],o=c[1];return Object(v.jsx)("div",{className:I.a.elevator,children:t.map((function(e,t){return Object(v.jsx)("div",{className:t===r?I.a.elevator_items_select:I.a.elevator_items,onClick:function(){return function(e,t){o(t),i(e.name)}(e,t)},children:e.value})}))})};s(235);function E(e){var t=e.getFullYear(),s=e.getMonth()+1;s=s<10?"0"+s:s;var a=e.getDate();a=a<10?"0"+a:a;var i=e.getHours();i=i<10?"0"+i:i;var n=e.getMinutes();n=n<10?"0"+n:n;var c=e.getSeconds();return t+"-"+s+"-"+a+" "+i+":"+n+":"+(c=c<10?"0"+c:c)}function P(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;console.log("f\u9632\u6296\u51fd\u6570\u6267\u884c");var s=null;return function(){for(var a=arguments.length,i=new Array(a),n=0;n<a;n++)i[n]=arguments[n];s&&clearTimeout(s),s=setTimeout((function(){e.apply(void 0,i),s=null}),t)}}var M=s.p+"static/media/kiss.5f0b0516.svg",T=s.p+"static/media/amazed.b9ee4ca0.svg",A=s.p+"static/media/scared.3d461b38.svg",D=function(e){Object(k.a)(s,e);var t=Object(w.a)(s);function s(e){var a;return Object(m.a)(this,s),(a=t.call(this,e)).cardClick=function(){u.a.post("/penta/common/view",h.a.stringify({pentaid:a.props.data.pentaid,views:1,type:"dy",userid:window.localStorage.getItem("userid")})).then((function(e){console.log("ressss",e)})),a.setState({views:a.state.views+1})},a.likeClick=function(){u.a.post("/penta/common/like",h.a.stringify({pentaid:a.props.data.pentaid,type:"dy",userid:window.localStorage.getItem("userid"),likes:"likes",likesval:1})).then((function(e){console.log("ressss",e)})),a.setState({likes:a.state.likes+1})},a.unlikeClick=function(){u.a.post("/penta/common/like",h.a.stringify({pentaid:a.props.data.pentaid,type:"dy",userid:window.localStorage.getItem("userid"),likes:"unlikes",likesval:1})).then((function(e){console.log("ressss",e)})),a.setState({unlikes:a.state.unlikes+1})},a.state={time:"",views:"",likes:"",unlikes:""},a}return Object(p.a)(s,[{key:"componentDidMount",value:function(){this.setState({time:E(new Date(this.props.data.time))}),this.setState({views:+this.props.data.views||0,likes:+this.props.data.likes||0,unlikes:+this.props.data.unlikes||0})}},{key:"render",value:function(){return Object(v.jsx)(v.Fragment,{children:Object(v.jsx)("div",{className:"card",children:Object(v.jsxs)("div",{className:0===this.state.likes&&0===this.state.unlikes?"card_container":this.state.likes>=this.state.unlikes?"card_container likes":"card_container unlikes",children:[Object(v.jsx)("div",{className:0===this.state.likes&&0===this.state.unlikes?"card_id":this.state.likes>=this.state.unlikes?"card_id likes":"card_id unlikes",children:this.props.data.pentaid}),Object(v.jsx)("div",{className:"card_views",children:this.state.views}),Object(v.jsx)("div",{className:"card_img",onClick:this.cardClick,children:Object(v.jsx)("a",{href:this.props.data.url,target:"_blank",rel:"noopener noreferrer",children:Object(v.jsx)("img",{src:this.props.data.imgurl,alt:"\u56fe\u7247\u8def\u5f84",width:"290px",height:"200px"})})}),Object(v.jsx)("div",{className:"card_title Singlelineellipsis",children:this.props.data.title}),Object(v.jsxs)("div",{className:"card_aurthorandtime ",children:[Object(v.jsx)("div",{className:"card_aurthorandtime_author Singlelineellipsis",children:this.props.data.author}),Object(v.jsx)("div",{className:"card_aurthorandtime_time Singlelineellipsis",children:this.state.time})]}),Object(v.jsxs)("div",{className:"card_bottom",children:[Object(v.jsxs)("button",{className:"card_bottom_item",onClick:this.likeClick,children:[Object(v.jsx)("img",{src:M,width:"20px",height:"20px",alt:"\u559c\u6b22"}),"    \u559c\u6b22",this.state.likes||0]}),Object(v.jsxs)("button",{className:"card_bottom_item",onClick:this.unlikeClick,children:[Object(v.jsx)("img",{src:A,width:"20px",height:"20px",alt:"\u4e0d\u559c\u6b22"})," \u4e0d\u559c\u6b22",this.state.unlikes||0]}),Object(v.jsxs)("button",{className:"card_bottom_item",onClick:this.cardClick,children:[Object(v.jsx)("img",{src:T,width:"20px",height:"20px",alt:"\u6d4f\u89c8\u91cf"})," \u6d4f\u89c8\u91cf",this.state.views||0]})]})]})})})}}]),s}(i.a.Component),B=[{id:0,name:"hy",value:"\u864e\u7259\u4e94\u6740"},{id:1,name:"dy",value:"\u6597\u9c7c\u4e94\u6740"}],L=function(e){var t=Object(a.useState)([]),s=Object(x.a)(t,2),i=s[0],n=s[1],c=Object(a.useState)("hy"),r=Object(x.a)(c,2),o=r[0],l=r[1],d=0;Object(a.useEffect)((function(){window.addEventListener("scroll",P(j,200)),u.a.get("/penta/common/1/".concat(o,"/")+window.localStorage.getItem("userid")).then((function(e){console.log("ressss",e),n(e.data.result)}))}),[]),Object(a.useEffect)((function(){window.addEventListener("scroll",P(j,200)),u.a.get("/penta/common/1/".concat(o,"/")+window.localStorage.getItem("userid")).then((function(e){console.log("ressss",e),n(e.data.result)}))}),[o]);var j=function(e){var t=e.srcElement.scrollingElement.scrollTop,s=Math.floor(t/600);console.log(s,d),s>d&&(d=s,h(s))},h=function(e){u.a.get("/penta/common/".concat(e,"/").concat(o,"/")+window.localStorage.getItem("userid")).then((function(e){console.log("ressss",e),n(e.data.result)}))};return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(_,{}),Object(v.jsx)("div",{className:"fix_bg"}),Object(v.jsxs)("div",{className:S.a.content,children:[Object(v.jsx)("div",{className:S.a.left,children:Object(v.jsx)(F,{dataList:B,curIndex:0,callBack:l})}),Object(v.jsx)("div",{className:S.a.right,children:i.map((function(e){return e.url="dy"==o?"https://v.douyu.com/show/":""+e.url,Object(v.jsx)(D,{data:e},e.pentaid)}))})]})]})},U=s(75),q=s(123),z=["component"],K=function(e){var t=e.component,s=Object(q.a)(e,z);return console.log("\u767b\u9646\u72b6\u6001\u9a8c\u8bc1",b.isAnthenticated()),Object(v.jsx)(f.b,Object(U.a)(Object(U.a)({},s),{},{render:function(e){return b.isAnthenticated()?Object(v.jsx)(t,Object(U.a)({},e)):Object(v.jsx)(f.a,{to:{pathname:"/login",state:{from:e.location}}})}}))};var R=function(){return Object(v.jsx)(v.Fragment,{children:Object(v.jsx)("div",{className:"app",children:Object(v.jsxs)(g.a,{children:[Object(v.jsx)(K,{exact:!0,path:"/pentakill",component:L}),Object(v.jsx)(K,{exact:!0,path:"/",component:O}),Object(v.jsx)(f.b,{exact:!0,path:"/login",component:O}),Object(v.jsx)(f.b,{exact:!0,path:"/register",component:O})]})})})};c.a.render(Object(v.jsx)(R,{}),document.getElementById("root"))},73:function(e,t,s){e.exports={content:"dYvFKT-DROXj7EbUvPD0l",left:"_1wWr8wyDVoWNzaONkKGeiT",right:"_3c3_1pfFhRM4ulb4ekKUhh"}},74:function(e,t,s){e.exports={elevator:"A0VPGPVUCQNsaFOFQy-nf",elevator_items:"_1uUO2GjvK_dnlquAMBqzB",elevator_items_select:"RMt3Tzvkisy58OLciQWY8"}}},[[236,1,2]]]);
//# sourceMappingURL=main.4f222ec7.chunk.js.map